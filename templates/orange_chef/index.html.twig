{# templates/orange_chef/index.html.twig #}
{% extends 'base.html.twig' %}
{% import '_macros/media.html.twig' as media %}

{% block title %}Orange Chef{% endblock %}

{% block body %}
    <div class="home">

        {# HERO ------------------------------------------------ #}
        <section class="hero">
            <div class="hero-content">
                <h1>Bienvenue chez <span>Orange Chef</span> 🍊👨‍🍳</h1>
                <p>Recettes ensoleillées, astuces anti-gaspi et une touche de fraîcheur vitaminée.</p>
                <div class="cta">
                    <a href="{{ path('app_recipe_index') }}" class="btn btn-primary">Découvrir les recettes</a>
                    <a href="{{ path('app_my_recipes') }}" class="btn btn-secondary">Créer ma recette</a>
                    <a href="{{ path('app_contact') }}" class="btn btn-outline">Nous contacter</a>
                </div>

                <div class="hero-metrics">
                    <span class="chip metric">🍽️ {{ recipesCount|default(0) }} recettes</span>
                    <span class="chip metric">⭐ {{ reviewsCount|default(0) }} avis</span>
                    <span class="chip metric">👥 {{ usersCount|default(0) }} membres</span>
                    <span class="chip ok">✅ 100% gratuit</span>
                </div>
            </div>

            <figure class="hero-media">
                <div class="hero-illustration">
                    {{ media.image('img/vedette.jpg', 'Orange Chef', 'hero', 720, 960, 'rounded-xl shadow-lg') }}
                </div>
            </figure>
        </section>

        {# POURQUOI -------------------------------------------- #}
        <section class="features">
            <h2 class="section-title">Pourquoi Orange Chef ?</h2>

            <div class="feature-grid">
                <article class="feature-card">
                    <div class="feature-icon">🍽️</div>
                    <h3 class="feature-title">Recettes gourmandes</h3>
                    <p class="feature-text">Des idées rapides et fiables pour briller en cuisine, avec l’orange en star.</p>
                </article>

                <article class="feature-card">
                    <div class="feature-icon">⏳</div>
                    <h3 class="feature-title">Anti-gaspi malin</h3>
                    <p class="feature-text">Suivez les dates limites, cuisinez vos oranges à temps et évitez le gaspillage.</p>
                </article>

                <article class="feature-card">
                    <div class="feature-icon">⭐</div>
                    <h3 class="feature-title">Notes & avis</h3>
                    <p class="feature-text">Partagez vos créations, notez les recettes et inspirez la communauté.</p>
                </article>
            </div>
        </section>

        {# À LA UNE -------------------------------------------- #}
        <section class="preview">
            <h2 class="section-title">À la une</h2>

            <div class="teaser-grid">
                {% for r in latestRecipes %}
                    {# Fallbacks simples + lisibles #}
                    {% set title = r.title ?? r.titre ?? 'Recette' %}
                    {% set desc  = (r.description ?? r.resume ?? '')|striptags|u.truncate(110, '…') %}
                    {% set img   = r.image ? ('/uploads/recipes/' ~ r.image) : 'assets/img/placeholder-recipe.jpg' %}

                    <article class="teaser-card">
                        <a href="{{ path('app_recipe_show', { id: r.id }) }}"
                           class="teaser-thumb"
                           aria-label="{{ title }}">
                            {{ media.image(img, title, 'card', 480, 320, 'card-img-top rounded') }}
                        </a>

                        <div class="teaser-content">
                            <h3 class="teaser-title">
                                <a href="{{ path('app_recipe_show', { id: r.id }) }}">{{ title }}</a>
                            </h3>
                            <p class="teaser-excerpt">{{ desc }}</p>
                        </div>
                    </article>
                {% else %}
                    <p class="muted">
                        Aucune recette pour le moment.
                        <a href="{{ path('app_my_recipes') }}">Ajoute la première</a> 🍊
                    </p>
                {% endfor %}

            </div>

            <div class="preview-actions">
                <a class="btn btn-primary" href="{{ path('app_recipe_index') }}">Voir toutes les recettes</a>
            </div>
        </section>

        {# QUOTE ------------------------------------------------ #}
        <section class="quote">
            <blockquote>« La cuisine, c’est l’art de transformer de simples ingrédients en souvenirs mémorables. »</blockquote>
        </section>
    </div>



{% endblock %}
