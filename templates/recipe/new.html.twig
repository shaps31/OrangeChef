{% extends 'base.html.twig' %}

{% block title %}Nouvelle Recette - Orange Chef{% endblock %}

{% block body %}
<div class="container">
    <div class="recipe-form-header">
        <h1>üçäCr√©er une nouvelle recette</h1>
        <p>Partagez votre cr√©ation culinaire avec la communaut√© Orange Chef !</p>
    </div>

    {{ form_start(form, {'attr': {'class': 'recipe-form', 'enctype': 'multipart/form-data'}}) }}

        <div class="form-section">
            <h3>üìù Informations g√©n√©rales</h3>
            <div class="form-row">
                <div class="form-group">
                    {{ form_label(form.title) }}
                    {{ form_widget(form.title) }}
                    {{ form_errors(form.title) }}
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    {{ form_label(form.description) }}
                    {{ form_widget(form.description) }}
                    {{ form_errors(form.description) }}
                </div>
            </div>

            <div class="form-row">
                <div class="form-group half">
                    {{ form_label(form.category) }}
                    {{ form_widget(form.category) }}
                    {{ form_errors(form.category) }}
                </div>
                <div class="form-group half">
                    {{ form_label(form.difficulty) }}
                    {{ form_widget(form.difficulty) }}
                    {{ form_errors(form.difficulty) }}
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>‚è±Ô∏èTemps et portions</h3>
            <div class="form-row">
                <div class="form-group third">
                    {{ form_label(form.preparationTime) }}
                    {{ form_widget(form.preparationTime) }}
                    {{ form_errors(form.preparationTime) }}
                </div>
                <div class="form-group third">
                    {{ form_label(form.cookingTime) }}
                    {{ form_widget(form.cookingTime) }}
                    {{ form_errors(form.cookingTime) }}
                </div>
                <div class="form-group third">
                    {{ form_label(form.servings) }}
                    {{ form_widget(form.servings) }}
                    {{ form_errors(form.servings) }}
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>ü•ÑIngr√©dients et pr√©paration</h3>
            <div class="form-row">
                <div class="form-group">
                    {{ form_label(form.ingredients) }}
                    {{ form_widget(form.ingredients) }}
                    {{ form_errors(form.ingredients) }}
                    <small class="form-help">Listez chaque ingr√©dient sur une ligne s√©par√©e</small>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    {{ form_label(form.instructions) }}
                    {{ form_widget(form.instructions) }}
                    {{ form_errors(form.instructions) }}
                    <small class="form-help">Num√©rotez chaque √©tape pour plus de clart√©</small>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>üì∏Photo et visibilit√©</h3>
            <div class="form-row">
                <div class="form-group">
                    {{ form_label(form.imageFile) }}
                    {{ form_widget(form.imageFile) }}
                    {{ form_errors(form.imageFile) }}
                    <small class="form-help">Format accept√©: JPEG, PNG, WebP (max 5MB)</small>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group checkbox-group">
                    {{ form_widget(form.isPublic) }}
                    {{ form_label(form.isPublic) }}
                    {{ form_errors(form.isPublic) }}
                </div>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <span class="loading-spinner" style="display: none;"></span>
                üçäPublier ma recette
            </button>
            <a href="{{ path('app_recipe_index') }}" class="btn btn-secondary">Annuler</a>
        </div>

    {{ form_end(form) }}
</div>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.recipe-form');
    const submitBtn = form.querySelector('button[type="submit"]');
    const spinner = submitBtn.querySelector('.loading-spinner');

    form.addEventListener('submit', function() {
        submitBtn.disabled = true;
        spinner.style.display = 'inline-block';
        submitBtn.innerHTML = '<span class="loading-spinner"></span> Publication en cours...';
    });
});
</script>
{% endblock %}
